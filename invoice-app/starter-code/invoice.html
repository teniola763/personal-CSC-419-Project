<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invoice Details</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* ===== Base Styles ===== */
    body {
      font-family: Arial, sans-serif;
      background: #f8f8fb;
      color: #000;
      transition: background 0.3s, color 0.3s;
      margin: 0;
      display: flex;
      min-height: 100vh;
    }
    body.dark {
      background: #141625;
      color: #fff;
    }

    /* ===== Layout ===== */
.container {
  display: flex;
  justify-content: center; /* Center the content horizontally */
  align-items: flex-start; /* Align content to the top */
  max-width: 1200px; /* Optional: Increase max-width for better spacing */
  width: 100%;
  margin: 0 auto; /* Center the container itself */
  padding-left: 80px; /* Keep space for the fixed sidebar */
  box-sizing: border-box;
}

  /* ===== Main Content ===== */
  .main-content {
    flex: 1;
    padding: 2rem;
    max-width: 800px; /* Keep the max-width for content */
    width: 100%; /* Ensure it takes available space */
    margin: 0 auto; /* Center the main content within the container */
  }
    /* ===== Sidebar ===== */
    .sidebar {
      width: 80px;
      background: #1e2139;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      border-radius: 0 20px 20px 0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
    }
    .logo {
      width: 100%;
    }
    .logo img {
      width: 100%;
      height: auto;
      display: block;
      border-bottom-left-radius: 20px;
      border-bottom-right-radius: 20px;
    }
    .theme-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    .icon-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
      transition: background 0.2s;
      margin-bottom: 0.5rem;
    }
    .icon-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    .theme-section img {
      width: 24px;
      height: 24px;
    }
    .divider {
      width: 100%;
      border: none;
      border-top: 1px solid #494e6e;
    }
    .profile {
      padding: 1rem 0;
      display: flex;
      justify-content: center;
      width: 100%;
    }
    .profile img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fff;
    }

    /* ===== Main Content ===== */
    .main-content {
      flex: 1;
      padding: 2rem;
      max-width: 800px;
    }

    a.back {
      display: inline-block;
      margin-bottom: 2rem;
      text-decoration: none;
      color: #7c5dfa;
      font-weight: bold;
    }

    /* ===== Status Bar ===== */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
      transition: background 0.3s;
    }
    body.dark .status-bar {
      background: #1e2139;
    }

    .status {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-weight: bold;
      text-transform: capitalize;
    }
    .status.paid {
      background: rgba(51, 214, 159, 0.2);
      color: #33d69f;
    }
    .status.pending {
      background: rgba(255, 143, 0, 0.2);
      color: #ff8f00;
    }
    .status.draft {
      background: rgba(55, 59, 83, 0.2);
      color: #373b53;
    }

    /* ===== Invoice Box ===== */
    .invoice-box {
      background: #fff;
      border-radius: 8px;
      padding: 2rem;
      transition: background 0.3s;
    }
    body.dark .invoice-box {
      background: #1e2139;
    }
    .invoice-top {
      display: flex;
      justify-content: space-between;
      margin-bottom: 2rem;
    }
    .invoice-top h2 {
      margin-bottom: 0.5rem;
    }
    .invoice-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    /* ===== Table ===== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th,
    td {
      padding: 1rem;
      text-align: left;
    }
    th {
      color: #7e88c3;
    }
    tr:nth-child(even) {
      background: #f9f9fb;
    }
    body.dark tr:nth-child(even) {
      background: #252945;
    }

    .total-box {
      background: #373b53;
      color: #fff;
      padding: 1rem;
      text-align: right;
      font-size: 1.2rem;
      border-radius: 0 0 8px 8px;
    }

    /* ===== Action Buttons ===== */
    .actions button {
      margin-left: 0.5rem;
      padding: 0.5rem 1rem;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s, color 0.3s, border 0.3s;
    }
    .actions button:first-child {
      background: #f8f8fb;
      color: #7e88c3;
      border-radius: 50px;
      padding: 0.4rem 1rem;
      font-size: 0.9rem;
      border: 1px solid #dfe3fa;
    }
    body.dark .actions button:first-child {
      background: #1e2139;
      color: #fff;
      border: 1px solid #252945;
    }
    .actions button:nth-child(2) {
      background: #ec5757;
      color: #fff;
      border-radius: 6px;
    }
    .actions button:last-child {
      background: #7c5dfa;
      color: #fff;
      border-radius: 6px;
    }
    .actions button:first-child:hover {
      background: #dfe3fa;
    }
    body.dark .actions button:first-child:hover {
      background: #252945;
    }
    .actions button:nth-child(2):hover {
      background: #ff9797;
    }
    .actions button:last-child:hover {
      background: #9277ff;
    }

    /* ===== Edit Overlay ===== */
    .edit-overlay {
      position: fixed;
      top: 0;
      left: 80px;   /* start after sidebar */
      width: 50%;   /* overlay itself only half */
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 1000;
      overflow-y: auto;
    }

    .edit-panel {
      position: fixed;
      top: 0;
      left: 80px; /* keep your sidebar visible */
      width: 50%; /* ‚úÖ take half of the page */
      height: 100vh; /* full height */
      background: #fff;
      overflow-y: auto;
      padding: 2rem;
      box-sizing: border-box;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      border-radius: 0 8px 8px 0;
    }

    body.dark .edit-panel {
      background: #1e2139;
    }


    .edit-overlay.show {
      display: block;
    }

    .edit-overlay.show .edit-panel {
      transform: translateX(0);
    }

    .edit-header {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
    }

    .edit-header h2 {
      color: #7c5dfa;
      font-size: 1.5rem;
      margin: 0;
      margin-left: 1rem;
    }

    /* ===== Forms ===== */
    form {
      width: 100%;
    }

    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #7e88c3;
      font-size: 0.9rem;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #dfe3fa;
      border-radius: 4px;
      font-size: 0.9rem;
      box-sizing: border-box;
      transition: border-color 0.2s;
      color: inherit;
      background: transparent;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #7c5dfa;
    }

    .form-group.error input,
    .form-group.error select {
      border-color: #ec5757 !important;
    }

    .form-group.required input,
    .form-group.required select {
      border-color: #7c5dfa;
      border-width: 2px;
    }

    /* Validation message right top */
    .form-group .error-text {
      position: absolute;
      top: 0;
      right: 0;
      color: #ec5757;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: none;
    }

    body.dark .form-group input,
    body.dark .form-group select {
      background: #1e2139;
      border-color: #252945;
      color: #fff;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 1rem;
    }

    .form-row.two-col {
      grid-template-columns: 1fr 1fr;
    }

    .section-header {
      color: #7c5dfa;
      font-weight: bold;
      font-size: 0.9rem;
      margin: 2rem 0 1rem 0;
    }

    /* Compact item row like screenshot */
.item-row {
  display: grid;
  grid-template-columns: 2fr 0.5fr 1fr 1fr 40px;
  gap: 0.5rem;
  align-items: center;
  margin-bottom: 0.75rem;
  padding: 0.75rem 1rem;
  background: #f9f9fb;
  border-radius: 8px;
}

body.dark .item-row {
  background: #252945;
}

.item-row .form-group {
  margin: 0;
}

.item-row .form-group label {
  display: none; /* hide labels inside row */
}

.item-row input {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #dfe3fa;
  border-radius: 6px;
  font-size: 0.9rem;
  background: #fff;
}

body.dark .item-row input {
  background: #1e2139;
  border-color: #252945;
  color: #fff;
}

/* Delete button compact */
.delete-item {
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  cursor: pointer;
}

.delete-item img {
  width: 16px;
  height: 16px;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.delete-item:hover img {
  transform: scale(1.2);
  opacity: 0.7;
}


   /* ===== Custom Date Input ===== */
.custom-date {
  position: relative;
  display: flex;
  align-items: center;
  background: var(--input-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: border 0.2s;
}

.custom-date input {
  border: none;
  background: transparent;
  font-size: 0.9rem;
  color: var(--text-color);
  width: 100%;
  cursor: pointer;
}

.custom-date img.calendar-icon {
  width: 16px;
  height: 16px;
  pointer-events: none;
}

/* Hover/Focus */
.custom-date:hover,
.custom-date:focus-within {
  border-color: #7c5dfa;
}

/* ===== Custom Select ===== */
.custom-select {
  position: relative;
  width: 100%;
}

.custom-select button {
  width: 100%;
  text-align: left;
  background: var(--input-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  color: var(--text-color);
  cursor: pointer;
  font-size: 0.9rem;
  transition: border 0.2s;
}

.custom-select button:hover {
  border-color: #7c5dfa;
}

/* Dropdown Panel */
.custom-select .dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 0.3rem);
  left: 0;
  right: 0;
  background: var(--dropdown-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  list-style: none;
  margin: 0;
  padding: 0.5rem 0;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  z-index: 10;
}

.custom-select .dropdown li {
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: background 0.2s;
}

.custom-select .dropdown li:hover {
  background: var(--hover-bg);
}

/* ===== Theme Variables ===== */
:root {
  --input-bg: #f9f9fb;
  --dropdown-bg: #fff;
  --border-color: #dfe3fa;
  --hover-bg: #f0f0f5;
  --text-color: #0c0e16;
}

body.dark {
  --input-bg: #1e2139;
  --dropdown-bg: #252945;
  --border-color: #252945;
  --hover-bg: #333554;
  --text-color: #fff;
}
/* Put Invoice Date and Payment Terms side by side */
.form-row.two-col {
  display: grid;
  grid-template-columns: 1fr 1fr; /* Equal width columns */
  gap: 1rem;
}

/* Make both fields the same height and style */
.custom-date,
.custom-select button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--input-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.6rem 0.8rem;
  font-size: 0.85rem;
  color: var(--text-color);
  width: 100%;
  height: 40px; /* üî• Forces same height */
  box-sizing: border-box;
}

/* Invoice date input styling */
.custom-date input[type="text"] {
  border: none;
  background: transparent;
  color: var(--text-color);
  font-size: 0.85rem;
  width: 100%;
  outline: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
}

/* Calendar icon aligned right */
.custom-date img.calendar-icon {
  width: 16px;
  height: 16px;
  margin-left: auto;
  pointer-events: none;
}

/* Calendar Dropdown */
.calendar-dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 5px);
  left: 0;
  background: var(--dropdown-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.5rem;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  z-index: 20;
  width: 220px;
}

.calendar-dropdown table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
  font-size: 0.8rem;
  color: var(--text-color);
}

.calendar-dropdown th,
.calendar-dropdown td {
  padding: 5px;
  cursor: pointer;
  border-radius: 4px;
}

.calendar-dropdown td:hover {
  background: var(--hover-bg);
}

/* Active day highlight */
.calendar-dropdown td.active {
  background: #7c5dfa;
  color: #fff;
}

/* Dark/light mode variables */
:root {
  --input-bg: #f9f9fb;
  --dropdown-bg: #fff;
  --border-color: #dfe3fa;
  --hover-bg: #f0f0f5;
  --text-color: #0c0e16;
}

body.dark {
  --input-bg: #1e2139;
  --dropdown-bg: #252945;
  --border-color: #252945;
  --hover-bg: #333554;
  --text-color: #fff;
}

.theme-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}


/* Remove number input spinners */

/* Chrome, Safari, Edge, Opera */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type=number] {
  -moz-appearance: textfield;
}

.delete-item {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.delete-item img {
  width: 16px;
  height: 16px;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.delete-item:hover img {
  transform: scale(1.2);
  opacity: 0.8;
}

/* Add New Item button */
.add-item {
  width: 100%;
  padding: 1rem;
  margin-top: 1rem;
  border: none;
  border-radius: 2rem;
  background: #f9f9ff; /* light purple/blue */
  color: #7c5dfa; /* primary accent color */
  font-weight: 600;
  font-size: 0.95rem;
  text-align: center;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.add-item:hover {
  background: #edeafe;
  color: #9277ff;
}

body.dark .add-item {
  background: #252945;
  color: #fff;
}

body.dark .add-item:hover {
  background: #1e2139;
}

/* Default item-row input style */
.item-row input {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 1px solid #dfe3fa; /* soft border */
  border-radius: 8px;
  font-size: 0.9rem;
  background: #f9f9ff; /* light subtle background */
  color: #000;
  font-weight: 500;
  outline: none; /* remove default focus outline */
  transition: border-color 0.2s ease, background 0.2s ease;
}

/* On focus: keep soft colors, not purple */
.item-row input:focus {
  border-color: #7e88c3;  /* subtle muted purple-gray */
  background: #ffffff;    /* white on focus for clarity */
  box-shadow: none;       /* no glow */
}

/* Dark mode */
body.dark .item-row input {
  background: #1e2139;
  border-color: #252945;
  color: #fff;
}

body.dark .item-row input:focus {
  border-color: #7c5dfa; /* keep brand purple in dark mode */
  background: #141625;
}

/* Default item-row input style */
.item-row input,
.item-name,
.item-qty,
.item-price {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 1px solid #d3d3d3; /* ‚úÖ dull grey border */
  border-radius: 8px;
  font-size: 0.9rem;
  background: #fff;
  color: #000;
  font-weight: 500;
  outline: none; /* remove default focus outline */
  transition: border-color 0.2s ease, background 0.2s ease;
}

/* On focus (light mode): keep dull grey */
.item-row input:focus,
.item-name:focus,
.item-qty:focus,
.item-price:focus {
  border-color: #d3d3d3 !important; /* ‚úÖ dull grey stays */
  background: #ffffff;
  box-shadow: none !important;
  outline: none !important;
}

/* Dark mode */
body.dark .item-row input,
body.dark .item-name,
body.dark .item-qty,
body.dark .item-price {
  background: #1e2139;
  border: 1px solid #555; /* ‚úÖ darker dull grey */
  color: #fff;
}

/* On focus (dark mode) */
body.dark .item-row input:focus,
body.dark .item-name:focus,
body.dark .item-qty:focus,
body.dark .item-price:focus {
  border-color: #555 !important; /* ‚úÖ no purple, dark grey stays */
  background: #141625;
  box-shadow: none !important;
  outline: none !important;
}

/* Item-row input styling with soft bluish-grey border */
.item-row input,
.item-row input:focus {
  border: 1px solid #dfe3fa !important; /* soft bluish-grey */
  background: #fff;
  color: #000;
  outline: none !important;
  box-shadow: none !important;
}

/* Dark mode version */
body.dark .item-row input,
body.dark .item-row input:focus {
  border: 1px solid #252945 !important; /* soft grey for dark */
  background: #1e2139;
  color: #fff;
}

/* Add New Item button */
.add-item {
  width: 100%;
  padding: 1rem;
  margin-top: 1rem;
  border: none;
  border-radius: 2rem;
  background: #DFE3FA;   /* soft bluish-grey background */
  color: #888EB0;        /* muted grey-blue text */
  font-weight: 600;
  font-size: 0.95rem;
  text-align: center;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.add-item:hover {
  background: #7E88C3;  /* hover background */
  color: #fff;          /* hover text turns white */
}

/* Dark mode */
body.dark .add-item {
  background: #252945;
  color: #DFE3FA;
}

body.dark .add-item:hover {
  background: #7E88C3;
  color: #fff;
}

/* Validation messages */
.validation-messages {
  margin-top: 1rem;
}

.validation-message {
  color: #EC5757;   /* bright red for errors */
  font-size: 0.9rem;
  font-weight: 500;
  margin-bottom: 0.25rem;
}


/* Cancel button */
.btn-cancel {
  background: #F9FAFE;     /* very light grey-blue */
  color: #7E88C3;          /* muted blue text */
  font-weight: 600;
  padding: 0.75rem 1.5rem;
  border-radius: 2rem;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.btn-cancel:hover {
  background: #DFE3FA;     /* light bluish-grey on hover */
  color: #7E88C3;
}


/* Save button */
.btn-save {
  background: #7C5DFA;    /* brand purple */
  color: #fff;
  font-weight: 600;
  padding: 0.75rem 1.5rem;
  border-radius: 2rem;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease;
}

.btn-save:hover {
  background: #9277FF;    /* lighter purple on hover */
}

.form-actions {
  display: flex;
  justify-content: flex-end;  /* push buttons to the right */
  gap: 1rem;                  /* space between Cancel and Save */
  margin-top: 6rem;           /* ‚¨ÜÔ∏è increase space above */
}

.validation-messages {
  margin-top: 1rem;
  color: #ec5757; /* üî¥ red */
  font-weight: bold;
  font-size: 0.95rem;
}

.validation-message {
  margin-bottom: 0.5rem;
}


.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: none; /* hidden by default */
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.modal {
  background: #fff;
  padding: 2rem;
  border-radius: 8px;
  width: 400px;
  max-width: 90%;
  box-shadow: 0px 4px 15px rgba(0,0,0,0.2);
  text-align: center;
}

.modal-actions {
  margin-top: 1.5rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.btn-cancel {
  background: #f9f9f9;
  color: #7e88c3;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 24px;
  font-weight: bold;
  cursor: pointer;
}

.btn-delete {
  background: #ec5757;
  color: #fff;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 24px;
  font-weight: bold;
  cursor: pointer;
}

.btn-cancel:hover {
  background: #e0e0e0;
}

.btn-delete:hover {
  background: #ff6b6b;
}

/* Overlay background */
.modal-overlay {
  display: none; /* hidden by default */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5); /* dark transparent overlay */
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

/* Modal box */
.modal {
  background: #fff;
  border-radius: 8px;
  padding: 2rem;
  max-width: 480px;
  width: 90%;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  text-align: left;
  animation: fadeIn 0.3s ease;
}

/* Title */
.modal h2 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

/* Paragraph */
.modal p {
  font-size: 0.9rem;
  color: #888eb0;
  margin-bottom: 2rem;
  line-height: 1.5;
}

/* Actions row */
.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
}

/* Fade in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}



  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <img src="./assets/Group 9.png" alt="Logo" />
      </div>
      <div class="theme-section">
        <button id="themeToggle" class="icon-btn" aria-label="Toggle Theme">
          <img id="themeIcon" src="./assets/icon-moon.svg" alt="Toggle Theme Icon" />
        </button>
        <hr class="divider" />
        <div class="profile">
          <img src="./assets/image-avatar.jpg" alt="User Profile Image" />
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <a href="index.html" class="back">‚Üê Go back</a>
      <div class="status-bar">
        <div>Status: <span id="status" class="status">Pending</span></div>
        <div class="actions">
          <button id="editBtn">Edit</button>
          <button id="deleteBtn">Delete</button>
          <button id="markPaidBtn">Mark as Paid</button>
        </div>
      </div>

      <div class="invoice-box">
        <div class="invoice-top">
          <div>
            <h2 id="invoice-id">#XM9141</h2>
            <p id="description">Graphic Design</p>
          </div>
          <div id="sender-address" aria-label="Sender Address"></div>
        </div>

        <div class="invoice-details">
          <div>
            <p><strong>Invoice Date:</strong> <span id="invoice-date"></span></p>
            <p><strong>Payment Due:</strong> <span id="due-date"></span></p>
          </div>
          <div>
            <p><strong>Bill To:</strong> <span id="client-name"></span></p>
            <p><strong>Email:</strong> <span id="client-email"></span></p>
            <address id="client-address"></address>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th scope="col">Item Name</th>
              <th scope="col">Qty.</th>
              <th scope="col">Price</th>
              <th scope="col">Total</th>
            </tr>
          </thead>
          <tbody id="items-table"></tbody>
        </table>

        <div class="total-box" aria-live="polite">
          Amount Due: <span id="total">¬£0.00</span>
        </div>
      </div>
    </main>
  </div>

  <!-- Edit Overlay -->
  <div id="editOverlay" class="edit-overlay" role="dialog" aria-modal="true" aria-labelledby="editOverlayLabel">
    <div class="edit-panel">
      <div class="edit-header">
        <h2 id="editOverlayLabel">Edit #<span id="edit-invoice-id">XM9141</span></h2>
      </div>

      <form id="editForm" novalidate>
        <div class="section-header">Bill From</div>

        <div class="form-group" id="senderStreetGroup">
          <label for="street-address">Street Address</label>
          <input type="text" id="street-address" name="streetAddress" value="19 Union Terrace" required />
          <div class="error-text" hidden>Can't be empty</div>
        </div>

        <div class="form-row">
          <div class="form-group" id="senderCityGroup">
            <label for="city">City</label>
            <input type="text" id="city" name="city" value="London" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
          <div class="form-group" id="senderPostCodeGroup">
            <label for="post-code">Post Code</label>
            <input type="text" id="post-code" name="postCode" value="E1 3EZ" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
          <div class="form-group" id="senderCountryGroup">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" value="United Kingdom" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
        </div>

        <div class="section-header">Bill To</div>

        <div class="form-group required" id="clientNameGroup">
          <label for="client-name-input">Client's Name</label>
          <input type="text" id="client-name-input" name="clientName" required />
          <div class="error-text" hidden>Can't be empty</div>
        </div>

        <div class="form-group" id="clientEmailGroup">
          <label for="client-email-input">Client's Email</label>
          <input type="email" id="client-email-input" name="clientEmail" value="alexgrim@mail.com" required />
          <div class="error-text" hidden>Please enter a valid email</div>
        </div>

        <div class="form-group" id="clientStreetGroup">
          <label for="client-street">Street Address</label>
          <input type="text" id="client-street" name="clientStreet" value="84 Church Way" required />
          <div class="error-text" hidden>Can't be empty</div>
        </div>

        <div class="form-row">
          <div class="form-group" id="clientCityGroup">
            <label for="client-city">City</label>
            <input type="text" id="client-city" name="clientCity" value="Bradford" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
          <div class="form-group" id="clientPostCodeGroup">
            <label for="client-post">Post Code</label>
            <input type="text" id="client-post" name="clientPostCode" value="BD1 9PB" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
          <div class="form-group" id="clientCountryGroup">
            <label for="client-country">Country</label>
            <input type="text" id="client-country" name="clientCountry" value="United Kingdom" required />
            <div class="error-text" hidden>Can't be empty</div>
          </div>
        </div>

<div class="form-row two-col">
<div class="form-group">
  <label for="invoice-date">Invoice Date</label>
  <div class="custom-date" id="invoice-date-picker">
    <input type="text" id="invoice-date" placeholder="Select Date" readonly>
    <img src="./assets/icon-calendar.svg" alt="calendar icon" class="calendar-icon">
    <div class="calendar-dropdown" id="calendar"></div>
  </div>
</div>


  <div class="form-group">
    <label for="payment-terms">Payment Terms</label>
    <div class="custom-select">
      <button id="payment-terms-btn">Net 30 Days</button>
      <ul class="dropdown">
        <li data-value="1">Net 1 Day</li>
        <li data-value="7">Net 7 Days</li>
        <li data-value="14">Net 14 Days</li>
        <li data-value="30">Net 30 Days</li>
      </ul>
    </div>
  </div>
</div>



        <div class="form-group" id="projectDescriptionGroup">
          <label for="project-description">Project Description</label>
          <input type="text" id="project-description" name="projectDescription" value="Graphic Design" required />
          <div class="error-text" hidden>Can't be empty</div>
        </div>

        <div class="section-header">Item List</div>

        <div id="items-container">
<div class="item-row">
  <div class="form-group required">
    <input type="text" name="itemName[]" value="Banner Design" placeholder="Item Name" required />
  </div>
  <div class="form-group required">
    <input type="number" name="itemQty[]" value="1" min="1" required />
  </div>
  <div class="form-group required">
    <input type="number" name="itemPrice[]" value="156.00" step="0.01" min="0" required />
  </div>
  <div class="form-group">
    <span class="item-total">156.00</span>
  </div>
  <button class="delete-item" title="Delete item">
    <img src="./assets/icon-delete.svg" alt="Delete" />
  </button>
</div>



          </div>
       

        <button type="button" class="add-item" onclick="addNewItem()">+ Add New Item</button>

        <div class="validation-messages" id="formValidationMessages" aria-live="polite" role="alert" style="display:none;">
          <div class="validation-message" id="fieldsValidationMessage">- All fields must be added</div>
          <div class="validation-message" id="itemsValidationMessage">- An item must be added</div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-cancel" onclick="closeEditOverlay()">Cancel</button>
          <button type="submit" class="btn btn-save">Save Changes</button>
        </div>
      </form>
    </div>
  </div>


<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal-overlay">
  <div class="modal">
    <h2>Confirm Deletion</h2>
    <p>
      Are you sure you want to delete invoice 
      <span id="invoiceId"></span>? This action cannot be undone.
    </p>
    <div class="modal-actions">
      <button class="btn btn-cancel" onclick="closeDeleteModal()">Cancel</button>
      <button class="btn btn-delete" onclick="confirmDelete()">Delete</button>
    </div>
  </div>
</div>





<script>
  // Force invoice page to always be light mode
  document.addEventListener("DOMContentLoaded", () => {
    document.body.classList.remove("dark"); // Remove dark mode
    localStorage.setItem("theme", "light"); // Save light mode for this page
  });

  // Elements
  const toggleBtn = document.getElementById("themeToggle");
  const themeIcon = document.getElementById("themeIcon");
  const body = document.body;
  const editBtn = document.getElementById("editBtn");
  const editOverlay = document.getElementById("editOverlay");
  const editForm = document.getElementById("editForm");
  const itemsContainer = document.getElementById("items-container");
  const formValidationMessages = document.getElementById("formValidationMessages");
  const fieldsValidationMessage = document.getElementById("fieldsValidationMessage");
  const itemsValidationMessage = document.getElementById("itemsValidationMessage");

  // Disable theme toggle completely for invoices
  if (toggleBtn) {
    toggleBtn.style.display = "none";
  }

  // Show edit overlay
  editBtn.addEventListener("click", () => {
    editOverlay.classList.add("show");
    clearValidationErrors();
  });

  // Close edit overlay
  function closeEditOverlay() {
    editOverlay.classList.remove("show");
    clearValidationErrors();
  }

  editOverlay.addEventListener("click", (e) => {
    if (e.target === editOverlay) closeEditOverlay();
  });


function addNewItem() {
  const newItem = document.createElement("div");
  newItem.className = "item-row";
  newItem.innerHTML = `
    <div class="form-group required">
      <label>Item Name</label>
      <input type="text" name="itemName[]" required />
      <div class="error-text" hidden>Can't be empty</div>
    </div>
    <div class="form-group required">
      <label>Qty.</label>
      <input type="number" name="itemQty[]" value="1" min="1" required />
      <div class="error-text" hidden>Must be at least 1</div>
    </div>
    <div class="form-group required">
      <label>Price</label>
      <input type="number" name="itemPrice[]" step="0.01" min="0" required />
      <div class="error-text" hidden>Must be a valid price</div>
    </div>
    <div class="form-group">
      <label>Total</label>
      <input type="number" name="itemTotal[]" readonly />
    </div>
    <button type="button" class="delete-item" onclick="removeItem(this)" title="Remove item">
      <img src="./assets/icon-delete.svg" alt="Delete" />
    </button>
  `;
  itemsContainer.appendChild(newItem);
}


  // Remove item
  function removeItem(button) {
    button.parentElement.remove();
    calculateTotalAmount();
  }

  // Calculate individual totals on input
  document.addEventListener("input", (e) => {
    const target = e.target;
    if (target.name === "itemQty[]" || target.name === "itemPrice[]") {
      const row = target.closest(".item-row");
      if (!row) return;
      const qtyInput = row.querySelector('input[name="itemQty[]"]');
      const priceInput = row.querySelector('input[name="itemPrice[]"]');
      const totalInput = row.querySelector('input[name="itemTotal[]"]');

      const qty = Number(qtyInput.value) || 0;
      const price = Number(priceInput.value) || 0;
      totalInput.value = (qty * price).toFixed(2);

      calculateTotalAmount();
    }
  });

  // Calculate total amount due
  function calculateTotalAmount() {
    const totalSpan = document.getElementById("total");
    let totalAmount = 0;
    const totals = document.querySelectorAll('input[name="itemTotal[]"]');
    totals.forEach((input) => {
      const val = parseFloat(input.value);
      if (!isNaN(val)) totalAmount += val;
    });
    totalSpan.textContent = `¬£${totalAmount.toFixed(2)}`;
  }

  // Clear validation errors
  function clearValidationErrors() {
    formValidationMessages.style.display = "none";
    const errorGroups = editForm.querySelectorAll(".form-group.error");
    errorGroups.forEach((group) => group.classList.remove("error"));
    const errorTexts = editForm.querySelectorAll(".error-text");
    errorTexts.forEach((el) => (el.hidden = true));
  }

  // Validate form fields
  function validateForm() {
    clearValidationErrors();

    let isValid = true;

    const requiredInputs = editForm.querySelectorAll("input[required], select[required]");
    requiredInputs.forEach((input) => {
      const value = input.type === "checkbox" ? input.checked : input.value.trim();
      const formGroup = input.closest(".form-group");
      const errorText = formGroup?.querySelector(".error-text");

      if (!value) {
        formGroup?.classList.add("error");
        if (errorText) errorText.hidden = false;
        isValid = false;
      } else if (input.type === "email") {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) {
          formGroup?.classList.add("error");
          if (errorText) errorText.textContent = "Please enter a valid email";
          if (errorText) errorText.hidden = false;
          isValid = false;
        }
      }
    });

    const itemRows = itemsContainer.querySelectorAll(".item-row");
    if (itemRows.length === 0) {
      itemsValidationMessage.style.display = "block";
      formValidationMessages.style.display = "block";
      isValid = false;
    } else {
      itemsValidationMessage.style.display = "none";
      formValidationMessages.style.display = "none";

      itemRows.forEach((row) => {
        const itemName = row.querySelector('input[name="itemName[]"]');
        const itemQty = row.querySelector('input[name="itemQty[]"]');
        const itemPrice = row.querySelector('input[name="itemPrice[]"]');

        if (!itemName.value.trim()) {
          itemName.closest(".form-group").classList.add("error");
          itemName.nextElementSibling.hidden = false;
          isValid = false;
        }
        if (!itemQty.value || itemQty.value < 1) {
          itemQty.closest(".form-group").classList.add("error");
          itemQty.nextElementSibling.hidden = false;
          isValid = false;
        }
        if (!itemPrice.value || itemPrice.value < 0) {
          itemPrice.closest(".form-group").classList.add("error");
          itemPrice.nextElementSibling.hidden = false;
          isValid = false;
        }
      });
    }

    if (!isValid) {
      formValidationMessages.style.display = "block";
    }

    return isValid;
  }

  // Handle form submit
  editForm.addEventListener("submit", (event) => {
    event.preventDefault();
    if (!validateForm()) return;
    alert("Invoice updated successfully!");
    closeEditOverlay();
  });

  // Load invoice data
  async function loadInvoice() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    if (!id) {
      document.querySelector(".main-content").innerHTML = "<h2>No Invoice Selected</h2>";
      return;
    }
    try {
      const res = await fetch("data.json");
      const invoices = await res.json();
      const invoice = invoices.find((inv) => inv.id === id);
      if (!invoice) {
        document.querySelector(".main-content").innerHTML = "<h2>Invoice Not Found</h2>";
        return;
      }

      const formatCurrency = (num) =>
        `¬£${num.toLocaleString("en-GB", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      const formatDate = (dateStr) => {
        const d = new Date(dateStr);
        return d.toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" });
      };

      document.getElementById("invoice-id").textContent = `#${invoice.id}`;
      document.getElementById("description").textContent = invoice.description;
      document.getElementById("status").textContent = invoice.status;
      document.getElementById("status").className = `status ${invoice.status}`;
      document.getElementById("invoice-date").textContent = formatDate(invoice.createdAt);
      document.getElementById("due-date").textContent = formatDate(invoice.paymentDue);
      document.getElementById("client-name").textContent = invoice.clientName;
      document.getElementById("client-email").textContent = invoice.clientEmail;

      document.getElementById("sender-address").innerHTML = `
        <p>${invoice.senderAddress.street}</p>
        <p>${invoice.senderAddress.city}</p>
        <p>${invoice.senderAddress.postCode}</p>
        <p>${invoice.senderAddress.country}</p>
      `;
      document.getElementById("client-address").innerHTML = `
        ${invoice.clientAddress.street}<br>
        ${invoice.clientAddress.city}<br>
        ${invoice.clientAddress.postCode}<br>
        ${invoice.clientAddress.country}
      `;

      const itemsTable = document.getElementById("items-table");
      itemsTable.innerHTML = "";
      invoice.items.forEach((item) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>${formatCurrency(item.price)}</td>
          <td>${formatCurrency(item.total)}</td>
        `;
        itemsTable.appendChild(row);
      });

      document.getElementById("total").textContent = formatCurrency(invoice.total);
    } catch (err) {
      console.error(err);
      document.querySelector(".main-content").innerHTML = "<h2>Error loading invoice</h2>";
    }
  }
  document.addEventListener("DOMContentLoaded", loadInvoice);

// Calendar setup
const dateInput = document.getElementById("invoice-date");
const datePicker = document.getElementById("invoice-date-picker");
const calendar = document.getElementById("calendar");

// Build calendar
function buildCalendar(month, year) {
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  const firstDay = new Date(year, month, 1).getDay();
  let table = `<table>
    <thead>
      <tr>
        <th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th>
      </tr>
    </thead>
    <tbody><tr>`;
  
  for (let i = 0; i < firstDay; i++) table += "<td></td>";
  for (let day = 1; day <= daysInMonth; day++) {
    if ((firstDay + day - 1) % 7 === 0 && day !== 1) table += "</tr><tr>";
    table += `<td data-day="${day}">${day}</td>`;
  }
  table += "</tr></tbody></table>";
  calendar.innerHTML = table;

  // Click handler for days
  calendar.querySelectorAll("td[data-day]").forEach(td => {
    td.addEventListener("click", () => {
      const selectedDate = new Date(year, month, td.dataset.day);
      dateInput.value = selectedDate.toLocaleDateString("en-GB", {
        day: "2-digit",
        month: "short",
        year: "numeric"
      });
      calendar.style.display = "none";
    });
  });
}

// Show calendar
datePicker.addEventListener("click", (e) => {
  e.stopPropagation();
  const today = new Date();
  buildCalendar(today.getMonth(), today.getFullYear());
  calendar.style.display = "block";
});

// Hide calendar when clicking outside
document.addEventListener("click", (e) => {
  if (!datePicker.contains(e.target)) {
    calendar.style.display = "none";
  }
});

// Force light mode on invoice pages
document.addEventListener("DOMContentLoaded", () => {
  document.body.classList.remove("dark"); 
  localStorage.setItem("theme", "light"); 

  const toggleBtn = document.getElementById("themeToggle");
  if (toggleBtn) {
    toggleBtn.disabled = true; // üî• Prevent clicking
    toggleBtn.style.opacity = "0.5"; // Optional: make it look disabled
    toggleBtn.style.cursor = "not-allowed";
  }
});

function validateForm() {
  let isValid = true;

  // Example: check required fields
  const requiredFields = document.querySelectorAll("input[required], select[required]");
  let missingFields = false;
  requiredFields.forEach(field => {
    if (!field.value.trim()) {
      missingFields = true;
      isValid = false;
    }
  });

  // Example: check if at least one item exists
  const items = document.querySelectorAll(".item-row");
  let missingItem = items.length === 0;

  // Show/hide messages
  document.getElementById("formValidationMessages").style.display = (!isValid || missingItem) ? "block" : "none";
  document.getElementById("fieldsValidationMessage").style.display = missingFields ? "block" : "none";
  document.getElementById("itemsValidationMessage").style.display = missingItem ? "block" : "none";

  return isValid;
}

// Hook into form submit
document.querySelector("form").addEventListener("submit", function(e) {
  if (!validateForm()) {
    e.preventDefault(); // stop form submission if invalid
  }
});


document.querySelector("form").addEventListener("submit", function (e) {
  let isValid = true;
  const itemsContainer = document.getElementById("items-container");
  const itemRows = itemsContainer.querySelectorAll(".item-row");
  const formMessages = document.getElementById("formValidationMessages");
  const itemsMessage = document.getElementById("itemsValidationMessage");
  const fieldsMessage = document.getElementById("fieldsValidationMessage");

  // Hide messages first
  formMessages.style.display = "none";
  itemsMessage.style.display = "none";
  fieldsMessage.style.display = "none";

  // ‚úÖ Assume missing item until we find a valid one
  let hasValidItem = false;

  itemRows.forEach(row => {
    const name = row.querySelector('input[name="itemName[]"]').value.trim();
    const qty = row.querySelector('input[name="itemQty[]"]').value.trim();
    const price = row.querySelector('input[name="itemPrice[]"]').value.trim();

    if (name && qty && price) {
      hasValidItem = true; // at least one good row
    }
  });

  if (!hasValidItem) {
    isValid = false;
    formMessages.style.display = "block";
    itemsMessage.style.display = "block";
  }

  // ‚ùå If any required field outside items is empty
  document.querySelectorAll(".form-group input[required], .form-group select[required]").forEach(input => {
    if (!input.value.trim()) {
      isValid = false;
      formMessages.style.display = "block";
      fieldsMessage.style.display = "block";
    }
  });

  // Stop submission if invalid
  if (!isValid) {
    e.preventDefault();
  }
});


document.getElementById("deleteBtn").addEventListener("click", function () {
  const invoiceId = document.getElementById("invoice-id").textContent;
  document.getElementById("invoiceId").textContent = invoiceId;
  document.getElementById("deleteModal").style.display = "flex";
});

function closeDeleteModal() {
  document.getElementById("deleteModal").style.display = "none";
}

function confirmDelete() {
  // here you can add real delete logic (e.g. API call or removing invoice from DOM)
  alert("Invoice deleted!");
  closeDeleteModal();
}

</script>


</script>

</body>
</html>
